# Machine 2: Meow

![image-20220310114924925](/home/kali/Desktop/Penetration Testing/Meow_2/screenshots/meow.png)

| Machine Name          | Nibbles   |
| --------------------- | --------- |
| Creator               | -         |
| OS                    | Linux     |
| Difficulty            | Very Easy |
| User Path             | -         |
| Privilege  Escalation | -         |
| IppsecVideo           | -         |
| Walkthrough           | -         |



[TOC]

## Introduction

Hello! This walkthrough will cover my first challenge in HTB. It is a Very Easy Machine called Meow and the exercise is divided into 9 different tasks.

Our first step when approaching any machine is to establish a VPN connection as a means to have connectivity to it. In order to accomplish this task, we have two different routes:

1. If you are using Parrot OS/Kali Linux or any other virtualized or local OS, you should follow the instructions below and connect to the VPN.
2. If you are completing this challenge through Pwnbox, you can continue to the next section.  

![image-20220310115428995](/home/kali/Desktop/Penetration Testing/Meow_2/screenshots/vpn_task.png)



------

## Connect to Starting Point VPN

In order to do this, first we have to click on the "Connect to HTB" button and select the appropriate VPN Access and VPN Server. Ideally, one should choose the closest server in order to have the fastest connection. For this machine we have two different options for each: EU and US.

Afterwards, for the protocol there are two different options:

1. UDP 1337
2. TCP 443

If you don't know the difference, TCP (Transmission Control Protocol) is a communication protocol which offers error correction. Being a stateful and connection-oriented protocol, TCP waits for confirmation that a packet has arrived before resending it (in case no confirmation is received) or sending the next packet. 

On the other hand, UDP (User Datagram Protocol) is a stateless and connectionless protocol which does not retransmit lost packets. In other words, the forwarding port receives no acknowledgment that its packet has been delivered successfully. Hence, data is continuously sent to the recipient, whether or not they receive it. 

Despite being more reliable TCP ends up having a slower performance than UDP, which in turn is faster but less efficient (no retransmission of lost packets).

All in all, your choice depends on whether reliability or speed is your primary concern. Speed for UDP and reliability for TCP.

For further information regarding this subject you should read [this post](https://proprivacy.com/vpn/guides/openvpn-tcp-vs-udp-difference-choose).

![image-20220310111231849](/home/kali/Desktop/Penetration Testing/Meow_2/screenshots/vpn_starting_point.png)

Hence, knowing the information above I selected:

- VPN Access: US - Starting Point
- VPN Server: US StartingPoint1
- Protocol: UDP 1337

After clicking on "Download VPN" the user receives the file 'starting_point_<username>.ovpn'. 

As for our next step, we should copy this file into our Virtual Machine environment and open the command line.

In the command line we should run the following command to launch our VPN connection:

```bash
sudo openvpn <machine_ip>
```

It is important to run this command with sudo, since the terminal may return an error stating that the `Operation was not permitted`. This happens because OpenVPN requires root privileges to create virutal interfaces on demand. If everything goes smoothly you should  see the following line in your console:
![image-20220310120426686](/home/kali/Desktop/Penetration Testing/Meow_2/screenshots/vpn_success1.png)

You can also check if your VPN connection is established through the commands: 'ip a', 'netstat -rn'.

The first command lists and shows all ip address associated on on all network interfaces. You should search for the tun0 interface  in your console output.

```bash
ip a
```

> asd

OutA

```bash
netstat -ra
```

> Output

A

Now that we know that we setup our VPN correctly we should wait a few minutes before HTB tells us that we are connected and that the server is ready for us :). If so let us spawn the machine. In order to do this, you should click on the 'Spawn Machine' button and wait till HTB returns the IP Address of the target machine.

Afterwards we can start completing the tasks.

------

## Task 1

> What does the acronym VM stand for?

If you have any background in computer science or virtualization you should know the answer to this question. If you don't it's ok you are here to learn :). The answer is **<u>Virtual Machine</u>**.

> A Virtual Machine (VM) is a compute resource that uses software instead of a physical computer to run programs and deploy apps. One or more virtual “guest” machines run on a physical “host” machine.  Each virtual machine runs its own operating system and functions separately from the other VMs, even when they are all running on the same host.
>
> Vmware (https://www.vmware.com/topics/glossary/content/virtual-machine.html)

------

## Task 2

> What tool do we use to interact with the operating system in order to start our VPN connection?

During the VPN set up process we had to open the **<u>terminal</u>** to execute OpenVpn with the configuration file provided to us by HTB.

> The Linux command line is a text interface to your computer. Also known as shell, terminal, console, command prompts and many others, is a computer program intended to interpret commands.
>
> (https://www.linuxjournal.com/content/linux-command-line-interface-introduction-guide)

------

## Task 3

> What service do we use to form our VPN connection?

I kind of already answered this question above :). The answer is **<u>openvpn</u>**.

> A Virtual Private Network (VPN) provides your business with a securely encrypted internet connection to your private network over the public internet.
>
> Open source OpenVPN uses VPN technologies to secure and encrypt data sent over the internet. Its custom VPN protocol uses SSL/TLS for key exchange.
>
> OpenVPN (https://openvpn.net/what-is-a-vpn/)

------

## Task 4

> What is the abreviated name for a tunnel interface in the output of your VPN boot-up sequence output?

As i have stated earlier, through the ip a command and the netstat -rn wecan see the virtual interface that was created when we setup our VPN connection. Hence, the abbreviated name for a tunnel interface is **<u>tun</u>**.

> To set up a VPN tunnel, the Layer 3 interface at each end must have a logical tunnel interface for the firewall to connect to and establish a VPN tunnel. A tunnel interface is a logical (virtual) interface that is used to deliver traffic between two endpoints. 
>
> PaloAlto (https://docs.paloaltonetworks.com/pan-os/9-1/pan-os-admin/vpns/site-to-site-vpn-concepts/tunnel-interface.html)

## Task 5

> What tool do we use to test our connection to the target?

On top of the 'ip a' and 'netstat -rn' commands, you can also **<u>ping</u>** the target machine in order to test your connectivity to it. 

```bash
ping <ip_address>
```

> The ping command sends packets of data to a specific IP address on a network, and then lets you know how long it took to transmit that data and get a response.
>
> (https://www.howtogeek.com/355664/how-to-use-ping-to-test-your-network/)

## Task 6

> What is the name of the tool we use to scan the target's ports?

Those of you who have completed some academy training or have previous experience pen testing should know the answer. For those of you who don't it is **<u>nmap</u>**.

> Nmap (“Network Mapper”) is an open source tool for network exploration and security auditing. It was designed to rapidly scan large networks, although it works fine against single hosts. Nmap uses raw IP packets in novel ways to determine what hosts are available on the network, what services (application name and version) those hosts are offering, what operating systems (and OS versions) they are running, what type of packet filters/firewalls are in use, and dozens of other characteristics.
>
> Nmap (https://nmap.org/book/man.html#man-description)

## Task 7

> What service do we identify on port 23/tcp during our scans?

If you are familiar with Nmap you probably have used it before. We can use nmap to scan what services the machine is offering.

To do this we should double check if our VPN connection is in place and perform an enumeration with nmap.

```bash
nmap -sV -oA <filename> <ip_address>
```

> -oA: Outputs the contents of the scan in normal, xmland greppable formats
>
> -sV: Detects version

![image-20220310125256566](/home/kali/Desktop/Penetration Testing/Meow_2/screenshots/telnet.png)

Ultimatelly, we can see that the machine has port 23 open running the **<u>telnet</u>** service.

Before we continue to the next task it is important to know what telnet is

> Telnet is a protocol that allows you to connect to remote computers (called hosts) over a TCP/IP network (such as the internet). Using telnet client software on your computer, you can make a connection to a telnet server.
>
> Telnet (https://kb.iu.edu/d/aayd)

## Task 8

> What username ultimately works with the remote management login prompt for the target?

As you can see the 'remote management login prompt' is telnet. We already have a clue as to what this answer might be if we read the hint in HTB  (***t). Nonetheless let's try to telnet the machine.

```bash
telnet <ip_address>
```

If we execute the following command we are prompted with this screen and asked for a username. 

![image-20220310130111938](/home/kali/Desktop/Penetration Testing/Meow_2/screenshots/login.png)

If you have experience working in Linux environments you should know that the **<u>root</u>** is the user which has administrative access to your system. Therefore, after typing in root you are granted access to the target system.

## Task 9

> Submit root flag

The contents of the flag.txt file are the target of this final task. First things first type `ls` in order to see the contents of the directory you are in.

```bash
ls
```

We can see the flag.txt file! Let us inspect the contents of it with the cat command.

```bash
cat flag.txt
```

Now copy its contents to the task's answer textbox and you are done!

Congratulations, you have just solved your first machine :)